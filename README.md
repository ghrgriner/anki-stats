# Overview

Anki is open-source flashcard software written in Python, Qt, Rust,
Svelte, and other languages. The software supports add-ons where users
can include their own code or third-party code through a Python
interface. Python is a language commonly used in the data science
field, while Rust is less widely adopted.

The purpose of this repository and documentation is to:

1. describe the statistics included in the Anki
[statistics window](https://docs.ankiweb.net/stats.html#statistics)
in greater detail than that provided by the application (e.g., to describe
the analysis population and methods used for each table or figure), and

2. provide Python code that generates similar output as the
application reports, with the expectation that this will be
an easier starting point than the existing Svelte and Rust
code for users who wish to create custom reports.

In other words, for (2) above, this repository does the preliminary work
of the [manual analyses proposed in the Anki Manual](https://docs.ankiweb.net/stats.html#manual-analysis).
Users can run the [companion data extractor](https://github.com/ghrgriner/anki-stats-extractor),
update the parameters in `stats.py` with the path(s) to the downloaded
file(s) and then run `stats.py` and get analysis datasets at the
card and review level from which they can immediately make custom
tables and figures.

The documentation in this repository does not include discussion
on the interpretation of the outcome variables themselves, such
as the meaning of FSRS retrievability.

# Motivation
Consider the following motivating questions and situations:

1. Among figures that report card counts the total counts are not always
the same, and similarly for figures that report review counts. Why
is this?

2. How are the tables and figures affected when studying is done in a
Filtered deck? For example, are these reviews included when counting
the percent of reviews that were correct?

3. How are the tables and figures affected when studying is done early
or late? For example, are these included when counting the percent
of reviews that were correct? Does it matter how early or late the
review was?

4. How are the tables and figures affects affected when cards are
reset or deleted?

5. You are studying a foreign language and you have two different
card types: one with your target language on the front and the other
with your native language on the front. You are interested in having
selected figures and tables stratified by these two card types.

6. You suspect or know some cards are harder than others and are
interested in quantifying the amount. For example, suppose you are
studying a foreign language with cards that have your native language
on the front. Some cards have a single target language word on the
back, and other cards have multiple target language words, where
you must differentiate between the meanings. You are interested in
quantifying the additional effort for the harder cards. For example,
is the average number of reviews per card for cards with three answers
on the back three times as much as the average number of reviews per
card with one answer on the back? Or is it twenty times as much?

7. You would like to recalculate the total time spent with a lower
maximum seconds per card than the configured option.

# Input Data

The Python program expects a tab-delimited flat file with one
record per card and `'"'` as the escape character for quoting.
The expected fields in the input are described in the module
docstring of the Python program. An Anki add-on capable of
extracting the necessary fields is available in the
[anki-stats-exporter](https://github.com/ghrgriner/anki-stats-exporter/)
repository.

# Limitations

The Retrievability table generated by the program differs
slightly from the counts in the figure in the statistics window.
The value being passed from Rust (in Anki) to Python (in Anki)
to our Python program differs from the value used within Rust
when creating the data for the figure. The rationale for this
is discussed in [this post](https://forums.ankiweb.net/t/bug-retrievability-in-browser-doesnt-match-retrievability-in-stats-histogram) on Anki Forums.

# Repository Wiki

Additional information is available on the wiki of this
repository, which can be accessed by clicking the tab above or
[here](https://github.com/ghrgriner/anki-stats/wiki).

